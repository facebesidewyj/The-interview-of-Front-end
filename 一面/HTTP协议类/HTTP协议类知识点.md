# HTTP 协议的主要特点

简单快速，灵活，无连接，无状态。

无连接：只连接一次就断开。

无状态：客户端和服务端状态是分开的，同一个客户端连续两次请求服务器，服务器在正常情况下识别不出是同一个客户端。

# HTTP 报文的组成部分

请求报文：请求行，请求头，空行，请求体。

响应报文：状态行，响应头，空行，响应体。

空行代表标识下面要传输请求体或响应体了。

# HTTP 方法

get:获取资源

post:传输资源

put:更新资源

delete:删除资源

head:获得报文首部

options:预检请求

patch:对资源进行部分修改，属于对put请求的补充

# GET 与 POST 的区别

1. get 在浏览器回退时是无害的，而 post 会再次请求。
2. get 产生的 URL 地址可以被收藏，而 post 产生的地址不能被收藏。
3. get 请求会被浏览器主动缓存，而 post 不会，除非手动设置。
4. get 请求传送的参数有长度限制（大概 2kb），而 post 没有。
5. get 比 post 更不安全。
6. get 请求参数会被完整的保留在浏览器的历史记录里，而 post 不会。
7. 重点： GET 产生一个 TCP 数据包，POST 产生两个 TCP 数据包。
8. GET 请求服务器直接响应 200，POST 先发送 header，服务器响应 100，然后再发送 data，服务器响应 200。

> 注：GET 和 POST 本质上没有区别，底层都是 TCP/IP 的链接，只是传输数据规则不同。

# HTTP 状态码说明

1xx：指示信息

2xx：成功

3xx：重定向

4xx：客户端错误

5xx：服务器错误

举例：200 客户端请求成功，301 所请求的页面已经转移到新的 URL（永久重定向，爬虫只爬新页面，域名过期），302临时重定向（爬虫还爬旧页面，活动页面）， 304 客户端有缓冲的文档并发出了一个条件性的请求，服务端告诉客户端，原来缓冲的文档还可以继续使用，403 请求页面的访问被禁止，404 请求资源不存在，503 请求未完成。

# 什么是持久化连接

HTTP1.1 版本是支持持久化连接的，非 keep-alive 模式时，每个请求/应答服务器和客户端都要新建一个连接，完成之后立即断开连接。 当使用 keep-alive 模式时，客户端到服务器的连接持久有效。

# 什么是管线化

在 HTTP1.1 版本持久连接的情况下，请求和响应都是打包完成的，客户端一次发送多个请求，服务器一次响应多个请求。 只有 get 和 head 请求支持管线化。

# HTTP、HTTPS、HTTP2、HTTP3对比

* HTTP协议运行在TCP之上，HTTPS协议运行在SSL/TLS之上，SSL/TLS之上协议运行在TCP之上
* HTTP协议默认端口80，HTTPS协议默认端口443
* HTTP2采用新的二进制进行传输，HTTP1.X采用文本传输
* HTTP1.x每一个请求都会建立一个链接，HTTP2实现了多路复用多个请求共享一个TCP链接，HTTP2的多路复用归功于帧和流，每个帧会标识属于哪个流，多个帧会组成一条数据流。HTTP1.x基于文本传输，没有标识，无法根据响应结果进行组装
* HTTP2对header进行了缓存和压缩
* HTTP2可以进行服务端主动推送
* HTTP3基于UDP实现了QUIC协议，减少了建立连接的握手次数，减少HTTP2丢包之后，再次建立连接的问题

# HTTPS加密原理

加密算法：

* 对称加密：通信双方拥有同一把密钥进行加密和解密，加解密效率高，速度快，但有泄露风险
* 非对称加密：通信双方拥有一把公钥，和一把私钥，一把用来加密，一把用来解密，加解密时间长，但安全性高

SSL协议的加密原理：

* 客户端和服务器端建立SSL握手，客户端通过CA证书来确认服务端的身份（非对称加密，CA证书中存在公钥和被私钥加密后的Hash 值，用公钥去解密Hash值，之后得到的结果跟Hash 算法生成的结果做对比，如果相等服务器就可以被信任）
* 互相传递三个随机数，通过这些随机数来生成一个密钥
* 互相确认密钥，握手结束
* 数据通信开始，客户端和服务端使用同一个对话密钥来进行加解密（对称加密）

> HTTPS的加密过程用到了对称加密和非对称加密，既利用了非对称加密安全性高的特点，有利用了对称加密效率高的特点，设计的非常巧妙。

